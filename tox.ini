# tox (https://tox.readthedocs.io/) is a tool for running tests
# in multiple virtualenvs. This configuration file will run the
# test suite on all supported python versions. To use it, "pip install tox"
# and then run "tox" from this directory.

[tox]
envlist = py3

[testenv]
deps =
    pytest
    coverage
whitelist_externals =
    mpiexec
commands =
    python setup.py test
    {toxinidir}/tests/mpi/mpi.sh brusselator
    {toxinidir}/tests/mpi/mpi.sh convergence_criterion
    {toxinidir}/tests/mpi/mpi.sh dahlquist
    {toxinidir}/tests/mpi/mpi.sh heat_1d
    {toxinidir}/tests/mpi/mpi.sh heat_2d
    {toxinidir}/tests/mpi/mpi.sh multilevel_structure
    {toxinidir}/tests/mpi/mpi.sh parameters
    {toxinidir}/tests/mpi/mpi.sh spatial_coarsening
    {toxinidir}/tests/mpi/mpi.sh time_integrators
    coverage run -m pytest
    coverage xml -o {toxinidir}/tests/coverage.xml
